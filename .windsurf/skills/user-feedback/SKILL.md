---
name: user-feedback
description: |
  使用者回饋技能。當 AI 完成任何回覆、工作總結、任務完成、進度回報、問題解決後，
  或需要向用戶收集回饋、確認需求、評估滿意度、改進建議時使用。在 AI 提供回應後
  主動收集用戶回饋，確保溝通品質和滿意度。
---

# 用戶回饋技能

> 在適當時機使用 MCP 工具收集用戶回饋，提升服務品質

## 觸發時機

### 必須使用回饋工具的情況
- **任何 AI 回覆後** - 完成回答或提供資訊後收集回饋
- **工作總結時** - 總結工作成果並收集滿意度
- **任務完成後** - 完成具體任務時確認效果
- **進度里程碑** - 重要階段完成時確認方向正確性  
- **需求確認** - 不確定用戶意圖時主動詢問
- **問題解決後** - 確認解決方案符合預期
- **重大變更前** - 影響用戶工作流程的決策前徵詢意見

### 回饋工具使用

**重要：使用前必須檢查工具可用性**

```javascript
// 動態檢測可用的回饋工具
const checkToolAvailability = () => {
  // 檢測所有可能的 collect_feedback 工具
  const possibleTools = [
    'mcp0_collect_feedback',
    'mcp1_collect_feedback', 
    'mcp2_collect_feedback',
    'mcp3_collect_feedback',
    'mcp4_collect_feedback',
    'mcp5_collect_feedback',
    'mcp6_collect_feedback',
    'mcp7_collect_feedback',
    'mcp8_collect_feedback',
    'mcp9_collect_feedback'
  ];
  
  // 找到第一個可用的工具
  const availableTool = possibleTools.find(tool => {
    try {
      // 檢查工具是否存在且可調用
      return typeof window[tool] === 'function' || 
             typeof globalThis[tool] === 'function';
    } catch {
      return false;
    }
  });
  
  if (availableTool && toolAvailable) {
    window[availableTool]({
      work_summary: "工作內容總結"
    });
  } else {
    console.log("回饋工具暫時不可用，改用文字詢問回饋");
    // 備用方案：直接文字詢問
  }
};
```

**參數說明：**
- `work_summary`: 工作內容總結，讓用戶清楚了解回饋主題

**工具可用性檢查流程：**
1. **動態檢測** - 掃描所有可能的 collect_feedback 工具（mcp0_ 到 mcp9_）
2. **驗證可用性** - 確認工具函數存在且可正常調用
3. **使用第一個可用工具** - 按順序使用找到的第一個可用工具
4. **備用方案** - 若所有工具都不可用，使用文字詢問方式

**工具檢測範圍：**
- `mcp0_collect_feedback` 到 `mcp9_collect_feedback`
- 涵蓋最多 10 個 MCP 服務器的可能順序
- 自動適應 MCP 服務器配置變更

## 使用範例

### 場景 1：一般回覆後回饋
```
我已經回答您關於 Nuxt 4 的問題。
[檢查工具可用性後觸發回饋工具收集回答滿意度]
若工具不可用：
「請問這個回答對您有幫助嗎？有任何需要補充說明的地方嗎？」
```

### 場景 2：任務完成回饋
```
工作完成！已實現使用者登入功能。
[檢查工具可用性後觸發回饋工具收集滿意度]
若工具不可用：
「登入功能已實現完成，請問是否符合您的預期需求？」
```

### 場景 3：需求確認回饋  
```
我理解您需要新增資料匯出功能，格式為 CSV。
[檢查工具可用性後觸發回饋工具確認需求正確性]
若工具不可用：
「請確認我的理解是否正確：您需要新增 CSV 格式的資料匯出功能，對嗎？」
```

### 場景 4：問題解決回饋
```
已修復 API 回應錯誤問題。
[檢查工具可用性後觸發回饋工具確認解決效果]
若工具不可用：
「API 錯誤問題已修復，請測試一下是否正常運作？」
```

## 注意事項

- **工具優先** - 優先使用 MCP 回饋工具，提供更好的用戶體驗
- **存在性檢查** - 每次使用前必須檢查工具是否可用
- **備用方案** - 準備文字詢問作為備用方案，確保回饋機制不中斷
- **避免過度使用** - 重要節點才觸發，不要每個小步驟都要求回饋
- **具體描述** - 工作總結要明確具體，讓用戶清楚回饋內容
- **時機恰當** - 在自然斷點觸發，不中斷用戶專注時刻

